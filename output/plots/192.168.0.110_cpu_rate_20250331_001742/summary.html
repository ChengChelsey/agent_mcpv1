<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>192.168.0.110 cpu_rate 异常检测汇总图</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <style>
        .custom-tooltip {
            background-color: rgba(255, 255, 255, 0.9);
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            max-width: 300px;
            font-size: 13px;
            line-height: 1.4;
        }
        .custom-tooltip-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .custom-tooltip-item {
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div id="chart_summary_e2cc6698" style="width:100%; height:600px;"></div>
    <script>
        // 存储tooltip数据（将从父窗口填充）
        let tooltipData = {"1": {"method": "Z-Score", "ts": 1742782800, "value": 1.99, "explanation": "Z-Score=3.66，高于均值3.66个标准差"}, "2": {"method": "Z-Score", "ts": 1742786400, "value": 2.11, "explanation": "Z-Score=3.95，高于均值3.95个标准差"}, "3": {"method": "Z-Score", "ts": 1742789400, "value": 1.95, "explanation": "Z-Score=3.56，高于均值3.56个标准差"}, "4": {"method": "Z-Score", "ts": 1742790000, "value": 2.14, "explanation": "Z-Score=4.02，高于均值4.02个标准差"}, "5": {"method": "Z-Score", "ts": 1742797200, "value": 2.04, "explanation": "Z-Score=3.78，高于均值3.78个标准差"}, "6": {"method": "Z-Score", "ts": 1742800800, "value": 2.07, "explanation": "Z-Score=3.85，高于均值3.85个标准差"}, "7": {"method": "Z-Score", "ts": 1742804400, "value": 2.08, "explanation": "Z-Score=3.88，高于均值3.88个标准差"}, "8": {"method": "Z-Score", "ts": 1742808000, "value": 2.16, "explanation": "Z-Score=4.07，高于均值4.07个标准差"}, "9": {"method": "Z-Score", "ts": 1742811600, "value": 2.07, "explanation": "Z-Score=3.85，高于均值3.85个标准差"}, "10": {"method": "Z-Score", "ts": 1742815200, "value": 2.12, "explanation": "Z-Score=3.97，高于均值3.97个标准差"}, "11": {"method": "Z-Score", "ts": 1742818800, "value": 2.09, "explanation": "Z-Score=3.90，高于均值3.90个标准差"}, "12": {"method": "Z-Score", "ts": 1742822400, "value": 2.12, "explanation": "Z-Score=3.97，高于均值3.97个标准差"}, "13": {"method": "Z-Score", "ts": 1742826000, "value": 2.1, "explanation": "Z-Score=3.93，高于均值3.93个标准差"}, "14": {"method": "Z-Score", "ts": 1742829600, "value": 2.13, "explanation": "Z-Score=4.00，高于均值4.00个标准差"}, "15": {"method": "CUSUM", "ts_start": 1742790000, "ts_end": 1742790300, "explanation": "CUSUM值=7.14，累计偏移超过阈值(6.0)"}, "16": {"method": "Hampel Filter", "ts": 1742818800, "value": 2.09, "explanation": "20:20:00: 值 2.09 高于局部中位数 (0.34) 118.04 个标准差"}, "17": {"method": "Hampel Filter", "ts": 1742804400, "value": 2.08, "explanation": "16:20:00: 值 2.08 高于局部中位数 (0.40) 113.31 个标准差"}, "18": {"method": "Hampel Filter", "ts": 1742822400, "value": 2.12, "explanation": "21:20:00: 值 2.12 高于局部中位数 (0.36) 59.36 个标准差"}, "19": {"method": "Hampel Filter", "ts": 1742826000, "value": 2.1, "explanation": "22:20:00: 值 2.10 高于局部中位数 (0.36) 58.68 个标准差"}, "20": {"method": "Hampel Filter", "ts": 1742800800, "value": 2.07, "explanation": "15:20:00: 值 2.07 高于局部中位数 (0.38) 56.99 个标准差"}, "21": {"method": "Hampel Filter", "ts": 1742790000, "value": 2.14, "explanation": "12:20:00: 值 2.14 高于局部中位数 (0.36) 40.02 个标准差"}, "22": {"method": "Hampel Filter", "ts": 1742829600, "value": 2.13, "explanation": "23:20:00: 值 2.13 高于局部中位数 (0.35) 40.02 个标准差"}, "23": {"method": "Hampel Filter", "ts": 1742815200, "value": 2.12, "explanation": "19:20:00: 值 2.12 高于局部中位数 (0.36) 39.57 个标准差"}, "24": {"method": "Hampel Filter", "ts": 1742786400, "value": 2.11, "explanation": "11:20:00: 值 2.11 高于局部中位数 (0.37) 39.12 个标准差"}, "25": {"method": "Hampel Filter", "ts": 1742811600, "value": 2.07, "explanation": "18:20:00: 值 2.07 高于局部中位数 (0.37) 38.22 个标准差"}, "26": {"method": "Hampel Filter", "ts": 1742797200, "value": 2.04, "explanation": "14:20:00: 值 2.04 高于局部中位数 (0.38) 37.32 个标准差"}, "27": {"method": "Hampel Filter", "ts": 1742782800, "value": 1.99, "explanation": "10:20:00: 值 1.99 高于局部中位数 (0.38) 36.20 个标准差"}, "28": {"method": "Hampel Filter", "ts": 1742779200, "value": 1.23, "explanation": "09:20:00: 值 1.23 高于局部中位数 (0.36) 29.34 个标准差"}, "29": {"method": "Hampel Filter", "ts": 1742800500, "value": 1.23, "explanation": "15:15:00: 值 1.23 高于局部中位数 (0.38) 28.67 个标准差"}};
        
        // 监听来自父窗口的消息以更新tooltip数据
        window.addEventListener('message', function(event) {
            if (event.data && event.data.type === 'tooltipData') {
                tooltipData = event.data.data;
                console.log('Received tooltip data:', tooltipData);
            }
        });
        
        // 创建自定义tooltip格式化器以显示异常详情
        function customTooltipFormatter(params) {
            // 默认tooltip用于常规点
            if (!params || !params.data) return '';
            
            // 检查这是否是标记点或区域（异常）
            let isAnomaly = false;
            let anomalyId = null;
            
            // 检查markPoint和markArea（检查组件类型）
            if (params.componentSubType === 'markPoint' || params.componentSubType === 'markArea') {
                isAnomaly = true;
                // 从标签或数据中提取异常ID
                if (params.data && params.data.label) {
                    const labelText = params.data.label.formatter;
                    anomalyId = parseInt(labelText.replace(/[^0-9]/g, ''));
                } else if (params.name && params.name.includes('#')) {
                    anomalyId = parseInt(params.name.replace(/[^0-9]/g, ''));
                } else if (params.data && params.data.id) {
                    const idText = params.data.id;
                    anomalyId = parseInt(idText.replace(/[^0-9]/g, ''));
                }
            }
            
            // 对于普通数据点（非异常），返回null使用默认tooltip
            if (!isAnomaly) {
                if (Array.isArray(params.value) && params.value.length >= 2) {
                    const date = new Date(params.value[0]);
                    const dateStr = date.toLocaleString();
                    return `<div class="custom-tooltip">
                        <div class="custom-tooltip-title">${dateStr}</div>
                        <div>${params.seriesName}: ${params.value[1].toFixed(2)}</div>
                    </div>`;
                }
                return null;
            }
            
            // 对于异常，创建自定义tooltip
            if (anomalyId && tooltipData[anomalyId]) {
                const anomalyInfo = tooltipData[anomalyId];
                let html = `<div class="custom-tooltip">`;
                html += `<div class="custom-tooltip-title">异常点 #${anomalyId}</div>`;
                
                // 根据可用数据格式化日期
                let dateStr = "";
                if (params.value && Array.isArray(params.value) && params.value.length >= 2) {
                    const date = new Date(params.value[0]);
                    dateStr = date.toLocaleString();
                } else if (anomalyInfo.ts) {
                    const date = new Date(anomalyInfo.ts * 1000);
                    dateStr = date.toLocaleString();
                }
                
                html += `<div>时间: ${dateStr}</div>`;
                html += `<div>检测方法: ${anomalyInfo.method}</div>`;
                
                if (anomalyInfo.ts_start && anomalyInfo.ts_end) {
                    // 是区间
                    const startDate = new Date(anomalyInfo.ts_start * 1000).toLocaleString();
                    const endDate = new Date(anomalyInfo.ts_end * 1000).toLocaleString();
                    html += `<div>异常区间: ${startDate} 至 ${endDate}</div>`;
                } else if (anomalyInfo.value !== undefined) {
                    html += `<div>数值: ${anomalyInfo.value.toFixed(2)}</div>`;
                }
                
                if (anomalyInfo.explanation) {
                    html += `<div class="custom-tooltip-item">说明: ${anomalyInfo.explanation}</div>`;
                }
                
                html += `</div>`;
                return html;
            }
            
            return null;
        }
        
        // 初始化图表
        var chart = echarts.init(document.getElementById('chart_summary_e2cc6698'));
        var option = {"title": {"text": "192.168.0.110 cpu_rate 异常检测汇总图", "left": "center"}, "tooltip": {"trigger": "item", "axisPointer": {"type": "cross"}, "formatter": null}, "legend": {"top": 30, "data": ["原始序列", "CUSUM 辅助曲线"]}, "grid": {"left": "3%", "right": "8%", "bottom": "10%", "containLabel": true}, "toolbox": {"feature": {"saveAsImage": {}, "dataZoom": {}, "restore": {}}}, "xAxis": {"type": "time", "name": "时间", "axisLabel": {"formatter": "{yyyy}-{MM}-{dd} {HH}:{mm}", "rotate": 30, "margin": 14}}, "yAxis": [{"type": "value", "name": "数值", "position": "left"}, {"type": "value", "name": "辅助曲线值", "position": "right", "splitLine": {"show": false}}], "series": [{"name": "原始序列", "type": "line", "data": [[1742745600000, 0.28], [1742745900000, 0.28], [1742746200000, 0.36], [1742746500000, 0.35], [1742746800000, 0.32], [1742747100000, 0.26], [1742747400000, 0.31], [1742747700000, 0.25], [1742748000000, 0.37], [1742748300000, 0.26], [1742748600000, 0.38], [1742748900000, 0.29], [1742749200000, 0.32], [1742749500000, 0.28], [1742749800000, 0.31], [1742750100000, 1.23], [1742750400000, 0.31], [1742750700000, 0.26], [1742751000000, 0.26], [1742751300000, 0.3], [1742751600000, 0.31], [1742751900000, 0.33], [1742752200000, 0.37], [1742752500000, 0.35], [1742752800000, 0.34], [1742753100000, 0.33], [1742753400000, 0.3], [1742753700000, 0.3], [1742754000000, 0.33], [1742754300000, 0.28], [1742754600000, 0.4], [1742754900000, 0.29], [1742755200000, 0.37], [1742755500000, 0.28], [1742755800000, 0.37], [1742756100000, 0.25], [1742756400000, 0.33], [1742756700000, 0.28], [1742757000000, 0.34], [1742757300000, 0.26], [1742757600000, 0.28], [1742757900000, 0.3], [1742758200000, 0.32], [1742758500000, 0.28], [1742758800000, 0.3], [1742759100000, 0.29], [1742759400000, 0.34], [1742759700000, 0.25], [1742760000000, 0.26], [1742760300000, 0.35], [1742760600000, 0.33], [1742760900000, 0.35], [1742761200000, 0.28], [1742761500000, 0.29], [1742761800000, 0.33], [1742762100000, 0.28], [1742762400000, 0.32], [1742762700000, 0.32], [1742763000000, 0.32], [1742763300000, 0.26], [1742763600000, 0.36], [1742763900000, 0.35], [1742764200000, 0.32], [1742764500000, 0.29], [1742764800000, 0.3], [1742765100000, 0.34], [1742765400000, 0.34], [1742765700000, 0.3], [1742766000000, 0.3], [1742766300000, 0.31], [1742766600000, 0.27], [1742766900000, 0.32], [1742767200000, 0.31], [1742767500000, 0.27], [1742767800000, 0.31], [1742768100000, 0.27], [1742768400000, 0.32], [1742768700000, 0.28], [1742769000000, 0.34], [1742769300000, 0.21], [1742769600000, 0.39], [1742769900000, 0.31], [1742770200000, 0.35], [1742770500000, 0.31], [1742770800000, 0.39], [1742771100000, 0.31], [1742771400000, 0.33], [1742771700000, 0.38], [1742772000000, 0.31], [1742772300000, 0.29], [1742772600000, 0.27], [1742772900000, 0.35], [1742773200000, 0.3], [1742773500000, 0.34], [1742773800000, 0.3], [1742774100000, 0.29], [1742774400000, 0.31], [1742774700000, 0.3], [1742775000000, 0.38], [1742775300000, 0.33], [1742775600000, 0.34], [1742775900000, 0.29], [1742776200000, 0.33], [1742776500000, 0.33], [1742776800000, 0.38], [1742777100000, 0.41], [1742777400000, 0.35], [1742777700000, 0.34], [1742778000000, 0.36], [1742778300000, 0.31], [1742778600000, 0.35], [1742778900000, 1.29], [1742779200000, 1.23], [1742779500000, 0.39], [1742779800000, 0.3], [1742780100000, 0.38], [1742780400000, 0.38], [1742780700000, 0.4], [1742781000000, 0.35], [1742781300000, 0.36], [1742781600000, 0.4], [1742781900000, 0.35], [1742782200000, 0.38], [1742782500000, 1.19], [1742782800000, 1.99], [1742783100000, 0.34], [1742783400000, 0.42], [1742783700000, 0.34], [1742784000000, 0.38], [1742784300000, 0.39], [1742784600000, 0.41], [1742784900000, 0.36], [1742785200000, 0.37], [1742785500000, 0.37], [1742785800000, 0.35], [1742786100000, 1.31], [1742786400000, 2.11], [1742786700000, 0.42], [1742787000000, 0.31], [1742787300000, 0.37], [1742787600000, 0.34], [1742787900000, 0.32], [1742788200000, 0.4], [1742788500000, 0.33], [1742788800000, 0.37], [1742789100000, 0.33], [1742789400000, 1.95], [1742789700000, 1.16], [1742790000000, 2.14], [1742790300000, 0.35], [1742790600000, 0.54], [1742790900000, 0.32], [1742791200000, 0.38], [1742791500000, 0.36], [1742791800000, 0.35], [1742792100000, 0.33], [1742792400000, 0.37], [1742792700000, 0.38], [1742793000000, 0.33], [1742793300000, 0.72], [1742793600000, 1.37], [1742793900000, 0.33], [1742794200000, 0.39], [1742794500000, 0.46], [1742794800000, 0.37], [1742795100000, 0.33], [1742795400000, 0.38], [1742795700000, 0.48], [1742796000000, 0.35], [1742796300000, 0.36], [1742796600000, 0.36], [1742796900000, 1.2], [1742797200000, 2.04], [1742797500000, 0.4], [1742797800000, 0.34], [1742798100000, 0.42], [1742798400000, 0.36], [1742798700000, 0.48], [1742799000000, 0.37], [1742799300000, 0.38], [1742799600000, 0.38], [1742799900000, 0.42], [1742800200000, 0.45], [1742800500000, 1.23], [1742800800000, 2.07], [1742801100000, 0.38], [1742801400000, 0.36], [1742801700000, 0.38], [1742802000000, 0.44], [1742802300000, 0.37], [1742802600000, 0.4], [1742802900000, 0.36], [1742803200000, 0.39], [1742803500000, 0.41], [1742803800000, 0.4], [1742804100000, 1.2], [1742804400000, 2.08], [1742804700000, 0.39], [1742805000000, 0.41], [1742805300000, 0.47], [1742805600000, 0.35], [1742805900000, 0.41], [1742806200000, 0.41], [1742806500000, 0.35], [1742806800000, 0.41], [1742807100000, 0.35], [1742807400000, 0.45], [1742807700000, 1.3], [1742808000000, 2.16], [1742808300000, 0.35], [1742808600000, 0.39], [1742808900000, 0.92], [1742809200000, 0.38], [1742809500000, 0.4], [1742809800000, 0.35], [1742810100000, 0.37], [1742810400000, 0.34], [1742810700000, 0.39], [1742811000000, 0.39], [1742811300000, 1.22], [1742811600000, 2.07], [1742811900000, 0.38], [1742812200000, 0.33], [1742812500000, 0.32], [1742812800000, 0.42], [1742813100000, 0.35], [1742813400000, 0.35], [1742813700000, 0.31], [1742814000000, 0.41], [1742814300000, 0.32], [1742814600000, 0.41], [1742814900000, 0.73], [1742815200000, 2.12], [1742815500000, 0.38], [1742815800000, 0.36], [1742816100000, 0.33], [1742816400000, 0.36], [1742816700000, 0.39], [1742817000000, 0.38], [1742817300000, 0.34], [1742817600000, 0.34], [1742817900000, 0.33], [1742818200000, 0.35], [1742818500000, 0.76], [1742818800000, 2.09], [1742819100000, 0.28], [1742819400000, 0.34], [1742819700000, 0.33], [1742820000000, 0.38], [1742820300000, 0.34], [1742820600000, 0.38], [1742820900000, 0.33], [1742821200000, 0.45], [1742821500000, 0.44], [1742821800000, 0.35], [1742822100000, 0.68], [1742822400000, 2.12], [1742822700000, 0.41], [1742823000000, 0.36], [1742823300000, 0.36], [1742823600000, 0.36], [1742823900000, 0.35], [1742824200000, 0.37], [1742824500000, 0.36], [1742824800000, 0.39], [1742825100000, 0.34], [1742825400000, 0.34], [1742825700000, 0.88], [1742826000000, 2.1], [1742826300000, 0.42], [1742826600000, 0.44], [1742826900000, 0.29], [1742827200000, 0.34], [1742827500000, 0.37], [1742827800000, 0.32], [1742828100000, 0.35], [1742828400000, 0.38], [1742828700000, 0.33], [1742829000000, 0.35], [1742829300000, 0.96], [1742829600000, 2.13], [1742829900000, 0.35], [1742830200000, 0.37], [1742830500000, 0.31], [1742830800000, 0.36], [1742831100000, 0.29], [1742831400000, 0.31], [1742831700000, 0.29]], "symbolSize": 0, "lineStyle": {"width": 2}, "itemStyle": {"color": "#5470C6"}, "markPoint": {"data": [{"coord": [1742782800000, 1.99], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#1"}, "id": "anomaly-1"}, {"coord": [1742786400000, 2.11], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#2"}, "id": "anomaly-2"}, {"coord": [1742789400000, 1.95], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#3"}, "id": "anomaly-3"}, {"coord": [1742790000000, 2.14], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#4"}, "id": "anomaly-4"}, {"coord": [1742797200000, 2.04], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#5"}, "id": "anomaly-5"}, {"coord": [1742800800000, 2.07], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#6"}, "id": "anomaly-6"}, {"coord": [1742804400000, 2.08], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#7"}, "id": "anomaly-7"}, {"coord": [1742808000000, 2.16], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#8"}, "id": "anomaly-8"}, {"coord": [1742811600000, 2.07], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#9"}, "id": "anomaly-9"}, {"coord": [1742815200000, 2.12], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#10"}, "id": "anomaly-10"}, {"coord": [1742818800000, 2.09], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#11"}, "id": "anomaly-11"}, {"coord": [1742822400000, 2.12], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#12"}, "id": "anomaly-12"}, {"coord": [1742826000000, 2.1], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#13"}, "id": "anomaly-13"}, {"coord": [1742829600000, 2.13], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#14"}, "id": "anomaly-14"}, {"coord": [1742818800000, 2.09], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#16"}, "id": "anomaly-16"}, {"coord": [1742804400000, 2.08], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#17"}, "id": "anomaly-17"}, {"coord": [1742822400000, 2.12], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#18"}, "id": "anomaly-18"}, {"coord": [1742826000000, 2.1], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#19"}, "id": "anomaly-19"}, {"coord": [1742800800000, 2.07], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#20"}, "id": "anomaly-20"}, {"coord": [1742790000000, 2.14], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#21"}, "id": "anomaly-21"}, {"coord": [1742829600000, 2.13], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#22"}, "id": "anomaly-22"}, {"coord": [1742815200000, 2.12], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#23"}, "id": "anomaly-23"}, {"coord": [1742786400000, 2.11], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#24"}, "id": "anomaly-24"}, {"coord": [1742811600000, 2.07], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#25"}, "id": "anomaly-25"}, {"coord": [1742797200000, 2.04], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#26"}, "id": "anomaly-26"}, {"coord": [1742782800000, 1.99], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#27"}, "id": "anomaly-27"}, {"coord": [1742779200000, 1.23], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#28"}, "id": "anomaly-28"}, {"coord": [1742800500000, 1.23], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#29"}, "id": "anomaly-29"}], "symbolSize": 8, "emphasis": {"scale": true, "itemStyle": {"shadowBlur": 10, "shadowColor": "rgba(0, 0, 0, 0.5)"}}, "tooltip": {"formatter": "{@id}"}}, "markArea": {"data": [[{"xAxis": 1742790000000, "itemStyle": {"color": "rgba(255, 100, 100, 0.2)"}, "id": "anomaly-15"}, {"xAxis": 1742790300000}]], "emphasis": {"itemStyle": {"opacity": 0.8}}}}, {"name": "CUSUM 辅助曲线", "type": "line", "yAxisIndex": 1, "data": [[1742745600000, 0.0], [1742745900000, 0.0], [1742746200000, 0.0], [1742746500000, 0.0], [1742746800000, 0.0], [1742747100000, 0.0], [1742747400000, 0.0], [1742747700000, 0.0], [1742748000000, 0.0], [1742748300000, 0.0], [1742748600000, 0.0], [1742748900000, 0.0], [1742749200000, 0.0], [1742749500000, 0.0], [1742749800000, 0.0], [1742750100000, 1.118596259580993], [1742750400000, 0.008135457874203778], [1742750700000, 0.0], [1742751000000, 0.0], [1742751300000, 0.0], [1742751600000, 0.0], [1742751900000, 0.0], [1742752200000, 0.0], [1742752500000, 0.0], [1742752800000, 0.0], [1742753100000, 0.0], [1742753400000, 0.0], [1742753700000, 0.0], [1742754000000, 0.0], [1742754300000, 0.0], [1742754600000, 0.0], [1742754900000, 0.0], [1742755200000, 0.0], [1742755500000, 0.0], [1742755800000, 0.0], [1742756100000, 0.0], [1742756400000, 0.0], [1742756700000, 0.0], [1742757000000, 0.0], [1742757300000, 0.0], [1742757600000, 0.0], [1742757900000, 0.0], [1742758200000, 0.0], [1742758500000, 0.0], [1742758800000, 0.0], [1742759100000, 0.0], [1742759400000, 0.0], [1742759700000, 0.0], [1742760000000, 0.0], [1742760300000, 0.0], [1742760600000, 0.0], [1742760900000, 0.0], [1742761200000, 0.0], [1742761500000, 0.0], [1742761800000, 0.0], [1742762100000, 0.0], [1742762400000, 0.0], [1742762700000, 0.0], [1742763000000, 0.0], [1742763300000, 0.0], [1742763600000, 0.0], [1742763900000, 0.0], [1742764200000, 0.0], [1742764500000, 0.0], [1742764800000, 0.0], [1742765100000, 0.0], [1742765400000, 0.0], [1742765700000, 0.0], [1742766000000, 0.0], [1742766300000, 0.0], [1742766600000, 0.0], [1742766900000, 0.0], [1742767200000, 0.0], [1742767500000, 0.0], [1742767800000, 0.0], [1742768100000, 0.0], [1742768400000, 0.0], [1742768700000, 0.0], [1742769000000, 0.0], [1742769300000, 0.0], [1742769600000, 0.0], [1742769900000, 0.0], [1742770200000, 0.0], [1742770500000, 0.0], [1742770800000, 0.0], [1742771100000, 0.0], [1742771400000, 0.0], [1742771700000, 0.0], [1742772000000, 0.0], [1742772300000, 0.0], [1742772600000, 0.0], [1742772900000, 0.0], [1742773200000, 0.0], [1742773500000, 0.0], [1742773800000, 0.0], [1742774100000, 0.0], [1742774400000, 0.0], [1742774700000, 0.0], [1742775000000, 0.0], [1742775300000, 0.0], [1742775600000, 0.0], [1742775900000, 0.0], [1742776200000, 0.0], [1742776500000, 0.0], [1742776800000, 0.0], [1742777100000, 0.0], [1742777400000, 0.0], [1742777700000, 0.0], [1742778000000, 0.0], [1742778300000, 0.0], [1742778600000, 0.0], [1742778900000, 1.263969546186718], [1742779200000, 2.382565805767711], [1742779500000, 1.4659360528685548], [1742779800000, 0.33124637006081126], [1742780100000, 0.0], [1742780400000, 0.0], [1742780700000, 0.0], [1742781000000, 0.0], [1742781300000, 0.0], [1742781600000, 0.0], [1742781900000, 0.0], [1742782200000, 0.0], [1742782500000, 1.0216807351771764], [1742782800000, 3.9816719584306854], [1742783100000, 2.9438978000267584], [1742783400000, 2.099954690430465], [1742783700000, 1.0621805320265383], [1742784000000, 0.12132189802642812], [1742784300000, 0.0], [1742784600000, 0.0], [1742784900000, 0.0], [1742785200000, 0.0], [1742785500000, 0.0], [1742785800000, 0.0], [1742786100000, 1.3124273083886264], [1742786400000, 4.563165104853585], [1742786700000, 3.719221995257291], [1742787000000, 2.6087611935505013], [1742787300000, 1.643673678449437], [1742787600000, 0.6058995200455102], [1742787900000, 0.0], [1742788200000, 0.0], [1742788500000, 0.0], [1742788800000, 0.0], [1742789100000, 0.0], [1742789400000, 2.863075698849692], [1742789700000, 3.8120697907240055], [1742790000000, 7.135494230491827], [1742790300000, 6.121948953188854], [1742790600000, 5.56875241680401], [1742790900000, 4.482520496198174], [1742791200000, 3.5416618621980636], [1742791500000, 2.552345465996045], [1742791800000, 1.5388001886930722], [1742792100000, 0.47679714918819127], [1742792400000, 0.0], [1742792700000, 0.0], [1742793000000, 0.0], [1742793300000, 0.0], [1742793600000, 1.4578005949943516], [1742793900000, 0.3957975554894706], [1742794200000, 0.0], [1742794500000, 0.0], [1742794800000, 0.0], [1742795100000, 0.0], [1742795400000, 0.0], [1742795700000, 0.0], [1742796000000, 0.0], [1742796300000, 0.0], [1742796600000, 0.0], [1742796900000, 1.0459096162781305], [1742797200000, 4.12704524503641], [1742797500000, 3.2346443732382077], [1742797800000, 2.1968702148342807], [1742798100000, 1.3529271052379872], [1742798400000, 0.3636107090359686], [1742798700000, 0.0], [1742799000000, 0.0], [1742799300000, 0.0], [1742799600000, 0.0], [1742799900000, 0.0], [1742800200000, 0.0], [1742800500000, 1.118596259580993], [1742800800000, 4.272418531642135], [1742801100000, 3.331559897642024], [1742801400000, 2.342243501440006], [1742801700000, 1.4013848674398954], [1742802000000, 0.6058995200455102], [1742802300000, 0.0], [1742802600000, 0.0], [1742802900000, 0.0], [1742803200000, 0.0], [1742803500000, 0.0], [1742803800000, 0.0], [1742804100000, 1.0459096162781305], [1742804400000, 4.223960769440227], [1742804700000, 3.307331016541071], [1742805000000, 2.439159025843823], [1742805300000, 1.7163603217523005], [1742805600000, 0.7028150444493277], [1742805900000, 0.0], [1742806200000, 0.0], [1742806500000, 0.0], [1742806800000, 0.0], [1742807100000, 0.0], [1742807400000, 0.0], [1742807700000, 1.2881984272876723], [1742808000000, 4.660080629257402], [1742808300000, 3.6465353519544292], [1742808600000, 2.7299055990552734], [1742808900000, 3.097406544506687], [1742809200000, 2.1565479105065766], [1742809500000, 1.2641470387083749], [1742809800000, 0.25060176140540213], [1742810100000, 0.0], [1742810400000, 0.0], [1742810700000, 0.0], [1742811000000, 0.0], [1742811300000, 1.0943673784800387], [1742811600000, 4.24818965054118], [1742811900000, 3.3073310165410694], [1742812200000, 2.2453279770361885], [1742812500000, 1.1590960564303534], [1742812800000, 0.3151529468340597], [1742813100000, 0.0], [1742813400000, 0.0], [1742813700000, 0.0], [1742814000000, 0.0], [1742814300000, 0.0], [1742814600000, 0.0], [1742814900000, 0.0], [1742815200000, 3.2749666775659128], [1742815500000, 2.334108043565802], [1742815800000, 1.3447916473637835], [1742816100000, 0.2827886078589026], [1742816400000, 0.0], [1742816700000, 0.0], [1742817000000, 0.0], [1742817300000, 0.0], [1742817600000, 0.0], [1742817900000, 0.0], [1742818200000, 0.0], [1742818500000, 0.0], [1742818800000, 3.20228003426305], [1742819100000, 2.019132589253399], [1742819400000, 0.981358430849472], [1742819700000, 0.0], [1742820000000, 0.0], [1742820300000, 0.0], [1742820600000, 0.0], [1742820900000, 0.0], [1742821200000, 0.0], [1742821500000, 0.0], [1742821800000, 0.0], [1742822100000, 0.0], [1742822400000, 3.2749666775659128], [1742822700000, 2.4067946868686647], [1742823000000, 1.417478290666646], [1742823300000, 0.4281618944646275], [1742823600000, 0.0], [1742823900000, 0.0], [1742824200000, 0.0], [1742824500000, 0.0], [1742824800000, 0.0], [1742825100000, 0.0], [1742825400000, 0.0], [1742825700000, 0.27058542104759764], [1742826000000, 3.4970943364116023], [1742826300000, 2.653151226815309], [1742826600000, 1.8576658794209238], [1742826900000, 0.6987473155122261], [1742827200000, 0.0], [1742827500000, 0.0], [1742827800000, 0.0], [1742828100000, 0.0], [1742828400000, 0.0], [1742828700000, 0.0], [1742829000000, 0.0], [1742829300000, 0.46441646985523066], [1742829600000, 3.7636120285220978], [1742829900000, 2.7500667512191246], [1742830200000, 1.7849792361180603], [1742830500000, 0.6745184344112711], [1742830800000, 0.0], [1742831100000, 0.0], [1742831400000, 0.0], [1742831700000, 0.0]], "lineStyle": {"type": "dashed", "width": 1.5}, "itemStyle": {"color": "#EE6666"}, "showSymbol": false}], "dataZoom": [{"type": "slider", "show": true, "xAxisIndex": [0], "start": 0, "end": 100, "bottom": 5}, {"type": "inside", "xAxisIndex": [0], "start": 0, "end": 100}]};
        
        // 设置自定义tooltip格式化器
        option.tooltip.formatter = customTooltipFormatter;
        
        chart.setOption(option);
        
        // 处理窗口大小变化
        window.addEventListener('resize', function() {
            chart.resize();
        });
    </script>
</body>
</html>