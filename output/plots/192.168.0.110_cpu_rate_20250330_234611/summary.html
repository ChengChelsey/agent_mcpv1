<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>192.168.0.110 cpu_rate 异常检测汇总图</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <style>
        .custom-tooltip {
            background-color: rgba(255, 255, 255, 0.9);
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            max-width: 300px;
            font-size: 13px;
            line-height: 1.4;
        }
        .custom-tooltip-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .custom-tooltip-item {
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div id="chart_summary_5c9d6b98" style="width:100%; height:600px;"></div>
    <script>
        // Store tooltip data (will be populated from parent window)
        let tooltipData = {"1": {"method": "Z-Score", "ts": 1743221700, "value": 2.7, "explanation": "Z-Score=4.35，高于均值4.35个标准差"}, "2": {"method": "CUSUM", "ts_start": 1743222000, "ts_end": 1743222600, "explanation": "CUSUM值=8.00，累计偏移超过阈值(6.0)"}, "3": {"method": "Hampel Filter", "ts": 1743177900, "value": 0.38, "explanation": "00:05:00: Value 0.38 is 3.37 MAD units above local median (0.33)"}, "4": {"method": "Hampel Filter", "ts": 1743181200, "value": 0.39, "explanation": "01:00:00: Value 0.39 is 3.37 MAD units above local median (0.34)"}, "5": {"method": "Hampel Filter", "ts": 1743182100, "value": 1.32, "explanation": "01:15:00: Value 1.32 is 33.05 MAD units above local median (0.34)"}, "6": {"method": "Hampel Filter", "ts": 1743182400, "value": 1.4, "explanation": "01:20:00: Value 1.40 is 35.75 MAD units above local median (0.34)"}, "7": {"method": "Hampel Filter", "ts": 1743183900, "value": 0.44, "explanation": "01:45:00: Value 0.44 is 6.74 MAD units above local median (0.34)"}, "8": {"method": "Hampel Filter", "ts": 1743186000, "value": 2.07, "explanation": "02:20:00: Value 2.07 is 58.34 MAD units above local median (0.34)"}, "9": {"method": "Hampel Filter", "ts": 1743187800, "value": 0.38, "explanation": "02:50:00: Value 0.38 is 3.37 MAD units above local median (0.33)"}, "10": {"method": "Hampel Filter", "ts": 1743189600, "value": 1.96, "explanation": "03:20:00: Value 1.96 is 109.94 MAD units above local median (0.33)"}, "11": {"method": "Hampel Filter", "ts": 1743190200, "value": 0.38, "explanation": "03:30:00: Value 0.38 is 3.37 MAD units above local median (0.33)"}, "12": {"method": "Hampel Filter", "ts": 1743193200, "value": 2.07, "explanation": "04:20:00: Value 2.07 is 58.34 MAD units above local median (0.34)"}, "13": {"method": "Hampel Filter", "ts": 1743196800, "value": 1.94, "explanation": "05:20:00: Value 1.94 is 35.97 MAD units above local median (0.34)"}, "14": {"method": "Hampel Filter", "ts": 1743200100, "value": 0.63, "explanation": "06:15:00: Value 0.63 is 6.52 MAD units above local median (0.34)"}, "15": {"method": "Hampel Filter", "ts": 1743200400, "value": 2.04, "explanation": "06:20:00: Value 2.04 is 38.22 MAD units above local median (0.34)"}, "16": {"method": "Hampel Filter", "ts": 1743203700, "value": 0.61, "explanation": "07:15:00: Value 0.61 is 4.38 MAD units above local median (0.35)"}, "17": {"method": "Hampel Filter", "ts": 1743204000, "value": 2.08, "explanation": "07:20:00: Value 2.08 is 29.17 MAD units above local median (0.35)"}, "18": {"method": "Hampel Filter", "ts": 1743207300, "value": 0.71, "explanation": "08:15:00: Value 0.71 is 8.32 MAD units above local median (0.34)"}, "19": {"method": "Hampel Filter", "ts": 1743207600, "value": 1.99, "explanation": "08:20:00: Value 1.99 is 37.10 MAD units above local median (0.34)"}, "20": {"method": "Hampel Filter", "ts": 1743210900, "value": 0.83, "explanation": "09:15:00: Value 0.83 is 11.24 MAD units above local median (0.33)"}, "21": {"method": "Hampel Filter", "ts": 1743211200, "value": 2.07, "explanation": "09:20:00: Value 2.07 is 39.12 MAD units above local median (0.33)"}, "22": {"method": "Hampel Filter", "ts": 1743214500, "value": 1.1, "explanation": "10:15:00: Value 1.10 is 12.48 MAD units above local median (0.36)"}, "23": {"method": "Hampel Filter", "ts": 1743214800, "value": 2.0, "explanation": "10:20:00: Value 2.00 is 27.65 MAD units above local median (0.36)"}, "24": {"method": "Hampel Filter", "ts": 1743218100, "value": 1.09, "explanation": "11:15:00: Value 1.09 is 12.31 MAD units above local median (0.36)"}, "25": {"method": "Hampel Filter", "ts": 1743218400, "value": 2.06, "explanation": "11:20:00: Value 2.06 is 28.67 MAD units above local median (0.36)"}, "26": {"method": "Hampel Filter", "ts": 1743220200, "value": 1.11, "explanation": "11:50:00: Value 1.11 is 8.43 MAD units above local median (0.36)"}, "27": {"method": "Hampel Filter", "ts": 1743221400, "value": 1.93, "explanation": "12:10:00: Value 1.93 is 17.65 MAD units above local median (0.36)"}, "28": {"method": "Hampel Filter", "ts": 1743221700, "value": 2.7, "explanation": "12:15:00: Value 2.70 is 26.31 MAD units above local median (0.36)"}, "29": {"method": "Hampel Filter", "ts": 1743222000, "value": 2.0, "explanation": "12:20:00: Value 2.00 is 18.44 MAD units above local median (0.36)"}, "30": {"method": "Hampel Filter", "ts": 1743222600, "value": 0.57, "explanation": "12:30:00: Value 0.57 is 4.95 MAD units above local median (0.35)"}, "31": {"method": "Hampel Filter", "ts": 1743222900, "value": 0.56, "explanation": "12:35:00: Value 0.56 is 4.72 MAD units above local median (0.35)"}, "32": {"method": "Hampel Filter", "ts": 1743225300, "value": 0.99, "explanation": "13:15:00: Value 0.99 is 8.63 MAD units above local median (0.35)"}, "33": {"method": "Hampel Filter", "ts": 1743225600, "value": 2.09, "explanation": "13:20:00: Value 2.09 is 23.47 MAD units above local median (0.35)"}, "34": {"method": "Hampel Filter", "ts": 1743228900, "value": 1.06, "explanation": "14:15:00: Value 1.06 is 24.28 MAD units above local median (0.34)"}, "35": {"method": "Hampel Filter", "ts": 1743229200, "value": 1.95, "explanation": "14:20:00: Value 1.95 is 54.30 MAD units above local median (0.34)"}, "36": {"method": "Hampel Filter", "ts": 1743232500, "value": 1.06, "explanation": "15:15:00: Value 1.06 is 24.28 MAD units above local median (0.34)"}, "37": {"method": "Hampel Filter", "ts": 1743232800, "value": 2.14, "explanation": "15:20:00: Value 2.14 is 60.70 MAD units above local median (0.34)"}, "38": {"method": "Hampel Filter", "ts": 1743236100, "value": 1.22, "explanation": "16:15:00: Value 1.22 is 19.34 MAD units above local median (0.36)"}, "39": {"method": "Hampel Filter", "ts": 1743236400, "value": 1.96, "explanation": "16:20:00: Value 1.96 is 35.97 MAD units above local median (0.36)"}, "40": {"method": "Hampel Filter", "ts": 1743239700, "value": 1.12, "explanation": "17:15:00: Value 1.12 is 25.29 MAD units above local median (0.37)"}, "41": {"method": "Hampel Filter", "ts": 1743240000, "value": 2.07, "explanation": "17:20:00: Value 2.07 is 57.33 MAD units above local median (0.37)"}, "42": {"method": "Hampel Filter", "ts": 1743240900, "value": 1.36, "explanation": "17:35:00: Value 1.36 is 16.69 MAD units above local median (0.37)"}, "43": {"method": "Hampel Filter", "ts": 1743243300, "value": 1.06, "explanation": "18:15:00: Value 1.06 is 23.94 MAD units above local median (0.35)"}, "44": {"method": "Hampel Filter", "ts": 1743243600, "value": 2.07, "explanation": "18:20:00: Value 2.07 is 58.01 MAD units above local median (0.35)"}, "45": {"method": "Hampel Filter", "ts": 1743246900, "value": 1.04, "explanation": "19:15:00: Value 1.04 is 23.61 MAD units above local median (0.34)"}, "46": {"method": "Hampel Filter", "ts": 1743247200, "value": 2.05, "explanation": "19:20:00: Value 2.05 is 57.67 MAD units above local median (0.34)"}, "47": {"method": "Hampel Filter", "ts": 1743250500, "value": 0.83, "explanation": "20:15:00: Value 0.83 is 16.19 MAD units above local median (0.35)"}, "48": {"method": "Hampel Filter", "ts": 1743250800, "value": 2.01, "explanation": "20:20:00: Value 2.01 is 55.98 MAD units above local median (0.35)"}, "49": {"method": "Hampel Filter", "ts": 1743254100, "value": 0.88, "explanation": "21:15:00: Value 0.88 is 18.21 MAD units above local median (0.34)"}, "50": {"method": "Hampel Filter", "ts": 1743254400, "value": 2.06, "explanation": "21:20:00: Value 2.06 is 58.01 MAD units above local median (0.34)"}, "51": {"method": "Hampel Filter", "ts": 1743257700, "value": 0.88, "explanation": "22:15:00: Value 0.88 is 12.14 MAD units above local median (0.34)"}, "52": {"method": "Hampel Filter", "ts": 1743258000, "value": 2.1, "explanation": "22:20:00: Value 2.10 is 39.57 MAD units above local median (0.34)"}, "53": {"method": "Hampel Filter", "ts": 1743261300, "value": 0.83, "explanation": "23:15:00: Value 0.83 is 16.86 MAD units above local median (0.33)"}, "54": {"method": "Hampel Filter", "ts": 1743261600, "value": 2.05, "explanation": "23:20:00: Value 2.05 is 58.17 MAD units above local median (0.33)"}};
        
        // Listen for messages from parent window to update tooltip data
        window.addEventListener('message', function(event) {
            if (event.data && event.data.type === 'tooltipData') {
                tooltipData = event.data.data;
                console.log('Received tooltip data:', tooltipData);
            }
        });
        
        // Create custom tooltip formatter to show anomaly details
        function customTooltipFormatter(params) {
            // Default tooltip for regular points
            if (!params || params.length === 0) return '';
            
            // Check if this is a marked point or area (anomaly)
            let isAnomaly = false;
            let anomalyId;
            
            // Check for markPoint and markArea
            for (let param of params) {
                if (param.componentSubType === 'markPoint' || param.componentSubType === 'markArea') {
                    isAnomaly = true;
                    // Extract anomaly ID from label or data
                    if (param.data && param.data.label) {
                        const labelText = param.data.label.formatter;
                        anomalyId = parseInt(labelText.replace(/[^0-9]/g, ''));
                    } else if (param.name && param.name.includes('#')) {
                        anomalyId = parseInt(param.name.replace(/[^0-9]/g, ''));
                    } else if (param.data && param.data.id) {
                        const idText = param.data.id;
                        anomalyId = parseInt(idText.replace(/[^0-9]/g, ''));
                    }
                    break;
                }
            }
            
            // Format date
            const date = new Date(params[0].value[0]);
            const dateStr = date.toLocaleString();
            
            let html = `<div class="custom-tooltip">`;
            
            if (isAnomaly && anomalyId && tooltipData[anomalyId]) {
                // Show detailed anomaly information
                const anomalyInfo = tooltipData[anomalyId];
                html += `<div class="custom-tooltip-title">异常点 #${anomalyId}</div>`;
                html += `<div>时间: ${dateStr}</div>`;
                html += `<div>检测方法: ${anomalyInfo.method}</div>`;
                
                if (anomalyInfo.ts_start && anomalyInfo.ts_end) {
                    // It's an interval
                    const startDate = new Date(anomalyInfo.ts_start * 1000).toLocaleString();
                    const endDate = new Date(anomalyInfo.ts_end * 1000).toLocaleString();
                    html += `<div>异常区间: ${startDate} 至 ${endDate}</div>`;
                } else if (anomalyInfo.value !== undefined) {
                    html += `<div>数值: ${anomalyInfo.value.toFixed(2)}</div>`;
                }
                
                if (anomalyInfo.explanation) {
                    html += `<div class="custom-tooltip-item">说明: ${anomalyInfo.explanation}</div>`;
                }
            } else {
                // Regular tooltip for data points
                html += `<div class="custom-tooltip-title">${dateStr}</div>`;
                
                for (let param of params) {
                    if (param.seriesName && param.value && param.value.length >= 2) {
                        const value = param.value[1];
                        const valueStr = (typeof value === 'number') ? value.toFixed(2) : value;
                        html += `<div>${param.seriesName}: ${valueStr}</div>`;
                    }
                }
            }
            
            html += `</div>`;
            return html;
        }
        
        // Initialize the chart
        var chart = echarts.init(document.getElementById('chart_summary_5c9d6b98'));
        var option = {"title": {"text": "192.168.0.110 cpu_rate 异常检测汇总图", "left": "center"}, "tooltip": {"trigger": "axis", "axisPointer": {"type": "cross"}, "formatter": null}, "legend": {"top": 30, "data": ["原始序列", "CUSUM 辅助曲线"]}, "grid": {"left": "3%", "right": "8%", "bottom": "3%", "containLabel": true}, "toolbox": {"feature": {"saveAsImage": {}, "dataZoom": {}, "restore": {}}}, "xAxis": {"type": "time", "name": "时间", "axisLabel": {"formatter": "{yyyy}-{MM}-{dd} {HH}:{mm}"}}, "yAxis": [{"type": "value", "name": "数值", "position": "left"}, {"type": "value", "name": "辅助曲线值", "position": "right", "splitLine": {"show": false}}], "series": [{"name": "原始序列", "type": "line", "data": [[1743177600000, 0.33], [1743177900000, 0.38], [1743178200000, 0.34], [1743178500000, 0.32], [1743178800000, 0.33], [1743179100000, 0.31], [1743179400000, 0.35], [1743179700000, 0.32], [1743180000000, 0.36], [1743180300000, 0.33], [1743180600000, 0.35], [1743180900000, 0.32], [1743181200000, 0.39], [1743181500000, 0.33], [1743181800000, 0.33], [1743182100000, 1.32], [1743182400000, 1.4], [1743182700000, 0.34], [1743183000000, 0.33], [1743183300000, 0.41], [1743183600000, 0.34], [1743183900000, 0.44], [1743184200000, 0.33], [1743184500000, 0.34], [1743184800000, 0.37], [1743185100000, 0.3], [1743185400000, 0.34], [1743185700000, 0.3], [1743186000000, 2.07], [1743186300000, 0.32], [1743186600000, 0.35], [1743186900000, 0.3], [1743187200000, 0.33], [1743187500000, 0.35], [1743187800000, 0.38], [1743188100000, 0.32], [1743188400000, 0.32], [1743188700000, 0.33], [1743189000000, 0.32], [1743189300000, 0.32], [1743189600000, 1.96], [1743189900000, 0.34], [1743190200000, 0.38], [1743190500000, 0.34], [1743190800000, 0.33], [1743191100000, 0.34], [1743191400000, 0.31], [1743191700000, 0.33], [1743192000000, 0.36], [1743192300000, 0.33], [1743192600000, 0.32], [1743192900000, 0.34], [1743193200000, 2.07], [1743193500000, 0.31], [1743193800000, 0.31], [1743194100000, 0.36], [1743194400000, 0.32], [1743194700000, 0.36], [1743195000000, 0.31], [1743195300000, 0.38], [1743195600000, 0.31], [1743195900000, 0.33], [1743196200000, 0.29], [1743196500000, 0.43], [1743196800000, 1.94], [1743197100000, 0.33], [1743197400000, 0.29], [1743197700000, 0.37], [1743198000000, 0.31], [1743198300000, 0.34], [1743198600000, 0.34], [1743198900000, 0.34], [1743199200000, 0.36], [1743199500000, 0.3], [1743199800000, 0.34], [1743200100000, 0.63], [1743200400000, 2.04], [1743200700000, 0.31], [1743201000000, 0.33], [1743201300000, 0.41], [1743201600000, 0.29], [1743201900000, 0.32], [1743202200000, 0.32], [1743202500000, 0.31], [1743202800000, 0.33], [1743203100000, 0.37], [1743203400000, 0.3], [1743203700000, 0.61], [1743204000000, 2.08], [1743204300000, 0.37], [1743204600000, 0.33], [1743204900000, 0.31], [1743205200000, 0.35], [1743205500000, 0.28], [1743205800000, 0.36], [1743206100000, 0.32], [1743206400000, 0.36], [1743206700000, 0.44], [1743207000000, 0.35], [1743207300000, 0.71], [1743207600000, 1.99], [1743207900000, 0.29], [1743208200000, 0.29], [1743208500000, 0.36], [1743208800000, 0.28], [1743209100000, 0.34], [1743209400000, 0.31], [1743209700000, 0.31], [1743210000000, 0.33], [1743210300000, 0.33], [1743210600000, 0.33], [1743210900000, 0.83], [1743211200000, 2.07], [1743211500000, 0.31], [1743211800000, 0.36], [1743212100000, 0.29], [1743212400000, 0.31], [1743212700000, 0.34], [1743213000000, 0.39], [1743213300000, 0.35], [1743213600000, 0.4], [1743213900000, 0.31], [1743214200000, 0.3], [1743214500000, 1.1], [1743214800000, 2.0], [1743215100000, 0.41], [1743215400000, 0.35], [1743215700000, 0.32], [1743216000000, 0.32], [1743216300000, 0.36], [1743216600000, 0.3], [1743216900000, 0.37], [1743217200000, 0.38], [1743217500000, 0.34], [1743217800000, 0.39], [1743218100000, 1.09], [1743218400000, 2.06], [1743218700000, 0.28], [1743219000000, 0.3], [1743219300000, 0.38], [1743219600000, 0.36], [1743219900000, 0.28], [1743220200000, 1.11], [1743220500000, 0.32], [1743220800000, 0.34], [1743221100000, 0.34], [1743221400000, 1.93], [1743221700000, 2.7], [1743222000000, 2.0], [1743222300000, 0.34], [1743222600000, 0.57], [1743222900000, 0.56], [1743223200000, 0.36], [1743223500000, 0.32], [1743223800000, 0.3], [1743224100000, 0.36], [1743224400000, 0.35], [1743224700000, 0.29], [1743225000000, 0.34], [1743225300000, 0.99], [1743225600000, 2.09], [1743225900000, 0.32], [1743226200000, 0.33], [1743226500000, 0.28], [1743226800000, 0.35], [1743227100000, 0.3], [1743227400000, 0.35], [1743227700000, 0.29], [1743228000000, 0.35], [1743228300000, 0.34], [1743228600000, 0.3], [1743228900000, 1.06], [1743229200000, 1.95], [1743229500000, 0.32], [1743229800000, 0.34], [1743230100000, 0.34], [1743230400000, 0.32], [1743230700000, 0.34], [1743231000000, 0.33], [1743231300000, 0.33], [1743231600000, 0.4], [1743231900000, 0.32], [1743232200000, 0.37], [1743232500000, 1.06], [1743232800000, 2.14], [1743233100000, 0.33], [1743233400000, 0.34], [1743233700000, 0.32], [1743234000000, 0.32], [1743234300000, 0.31], [1743234600000, 0.33], [1743234900000, 0.34], [1743235200000, 0.35], [1743235500000, 0.39], [1743235800000, 0.35], [1743236100000, 1.22], [1743236400000, 1.96], [1743236700000, 0.36], [1743237000000, 0.36], [1743237300000, 0.39], [1743237600000, 0.36], [1743237900000, 0.35], [1743238200000, 0.38], [1743238500000, 0.38], [1743238800000, 0.37], [1743239100000, 0.41], [1743239400000, 0.35], [1743239700000, 1.12], [1743240000000, 2.07], [1743240300000, 0.45], [1743240600000, 0.33], [1743240900000, 1.36], [1743241200000, 0.33], [1743241500000, 0.33], [1743241800000, 0.36], [1743242100000, 0.37], [1743242400000, 0.35], [1743242700000, 0.34], [1743243000000, 0.38], [1743243300000, 1.06], [1743243600000, 2.07], [1743243900000, 0.32], [1743244200000, 0.33], [1743244500000, 0.32], [1743244800000, 0.37], [1743245100000, 0.34], [1743245400000, 0.34], [1743245700000, 0.31], [1743246000000, 0.37], [1743246300000, 0.33], [1743246600000, 0.33], [1743246900000, 1.04], [1743247200000, 2.05], [1743247500000, 0.35], [1743247800000, 0.32], [1743248100000, 0.36], [1743248400000, 0.32], [1743248700000, 0.36], [1743249000000, 0.33], [1743249300000, 0.33], [1743249600000, 0.38], [1743249900000, 0.33], [1743250200000, 0.37], [1743250500000, 0.83], [1743250800000, 2.01], [1743251100000, 0.32], [1743251400000, 0.32], [1743251700000, 0.32], [1743252000000, 0.35], [1743252300000, 0.36], [1743252600000, 0.33], [1743252900000, 0.36], [1743253200000, 0.33], [1743253500000, 0.33], [1743253800000, 0.33], [1743254100000, 0.88], [1743254400000, 2.06], [1743254700000, 0.37], [1743255000000, 0.33], [1743255300000, 0.34], [1743255600000, 0.36], [1743255900000, 0.31], [1743256200000, 0.32], [1743256500000, 0.38], [1743256800000, 0.39], [1743257100000, 0.3], [1743257400000, 0.33], [1743257700000, 0.88], [1743258000000, 2.1], [1743258300000, 0.31], [1743258600000, 0.35], [1743258900000, 0.34], [1743259200000, 0.32], [1743259500000, 0.35], [1743259800000, 0.33], [1743260100000, 0.33], [1743260400000, 0.31], [1743260700000, 0.36], [1743261000000, 0.31], [1743261300000, 0.83], [1743261600000, 2.05], [1743261900000, 0.3], [1743262200000, 0.32], [1743262500000, 0.32], [1743262800000, 0.36], [1743263100000, 0.31], [1743263400000, 0.29], [1743263700000, 0.28]], "symbolSize": 0, "lineStyle": {"width": 2}, "itemStyle": {"color": "#5470C6"}, "markPoint": {"data": [{"coord": [1743221700000, 2.7], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#1"}, "id": "anomaly-1"}, {"coord": [1743177900000, 0.38], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#3"}, "id": "anomaly-3"}, {"coord": [1743181200000, 0.39], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#4"}, "id": "anomaly-4"}, {"coord": [1743182100000, 1.32], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#5"}, "id": "anomaly-5"}, {"coord": [1743182400000, 1.4], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#6"}, "id": "anomaly-6"}, {"coord": [1743183900000, 0.44], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#7"}, "id": "anomaly-7"}, {"coord": [1743186000000, 2.07], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#8"}, "id": "anomaly-8"}, {"coord": [1743187800000, 0.38], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#9"}, "id": "anomaly-9"}, {"coord": [1743189600000, 1.96], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#10"}, "id": "anomaly-10"}, {"coord": [1743190200000, 0.38], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#11"}, "id": "anomaly-11"}, {"coord": [1743193200000, 2.07], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#12"}, "id": "anomaly-12"}, {"coord": [1743196800000, 1.94], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#13"}, "id": "anomaly-13"}, {"coord": [1743200100000, 0.63], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#14"}, "id": "anomaly-14"}, {"coord": [1743200400000, 2.04], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#15"}, "id": "anomaly-15"}, {"coord": [1743203700000, 0.61], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#16"}, "id": "anomaly-16"}, {"coord": [1743204000000, 2.08], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#17"}, "id": "anomaly-17"}, {"coord": [1743207300000, 0.71], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#18"}, "id": "anomaly-18"}, {"coord": [1743207600000, 1.99], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#19"}, "id": "anomaly-19"}, {"coord": [1743210900000, 0.83], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#20"}, "id": "anomaly-20"}, {"coord": [1743211200000, 2.07], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#21"}, "id": "anomaly-21"}, {"coord": [1743214500000, 1.1], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#22"}, "id": "anomaly-22"}, {"coord": [1743214800000, 2.0], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#23"}, "id": "anomaly-23"}, {"coord": [1743218100000, 1.09], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#24"}, "id": "anomaly-24"}, {"coord": [1743218400000, 2.06], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#25"}, "id": "anomaly-25"}, {"coord": [1743220200000, 1.11], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#26"}, "id": "anomaly-26"}, {"coord": [1743221400000, 1.93], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#27"}, "id": "anomaly-27"}, {"coord": [1743221700000, 2.7], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#28"}, "id": "anomaly-28"}, {"coord": [1743222000000, 2.0], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#29"}, "id": "anomaly-29"}, {"coord": [1743222600000, 0.57], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#30"}, "id": "anomaly-30"}, {"coord": [1743222900000, 0.56], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#31"}, "id": "anomaly-31"}, {"coord": [1743225300000, 0.99], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#32"}, "id": "anomaly-32"}, {"coord": [1743225600000, 2.09], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#33"}, "id": "anomaly-33"}, {"coord": [1743228900000, 1.06], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#34"}, "id": "anomaly-34"}, {"coord": [1743229200000, 1.95], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#35"}, "id": "anomaly-35"}, {"coord": [1743232500000, 1.06], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#36"}, "id": "anomaly-36"}, {"coord": [1743232800000, 2.14], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#37"}, "id": "anomaly-37"}, {"coord": [1743236100000, 1.22], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#38"}, "id": "anomaly-38"}, {"coord": [1743236400000, 1.96], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#39"}, "id": "anomaly-39"}, {"coord": [1743239700000, 1.12], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#40"}, "id": "anomaly-40"}, {"coord": [1743240000000, 2.07], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#41"}, "id": "anomaly-41"}, {"coord": [1743240900000, 1.36], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#42"}, "id": "anomaly-42"}, {"coord": [1743243300000, 1.06], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#43"}, "id": "anomaly-43"}, {"coord": [1743243600000, 2.07], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#44"}, "id": "anomaly-44"}, {"coord": [1743246900000, 1.04], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#45"}, "id": "anomaly-45"}, {"coord": [1743247200000, 2.05], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#46"}, "id": "anomaly-46"}, {"coord": [1743250500000, 0.83], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#47"}, "id": "anomaly-47"}, {"coord": [1743250800000, 2.01], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#48"}, "id": "anomaly-48"}, {"coord": [1743254100000, 0.88], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#49"}, "id": "anomaly-49"}, {"coord": [1743254400000, 2.06], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#50"}, "id": "anomaly-50"}, {"coord": [1743257700000, 0.88], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#51"}, "id": "anomaly-51"}, {"coord": [1743258000000, 2.1], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#52"}, "id": "anomaly-52"}, {"coord": [1743261300000, 0.83], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#53"}, "id": "anomaly-53"}, {"coord": [1743261600000, 2.05], "symbol": "circle", "symbolSize": 10, "itemStyle": {"color": "red"}, "label": {"show": true, "position": "top", "formatter": "#54"}, "id": "anomaly-54"}], "symbolSize": 8, "emphasis": {"scale": true, "itemStyle": {"shadowBlur": 10, "shadowColor": "rgba(0, 0, 0, 0.5)"}}}, "markArea": {"data": [[{"xAxis": 1743222000000, "itemStyle": {"color": "rgba(255, 100, 100, 0.2)"}, "id": "anomaly-2"}, {"xAxis": 1743222600000}]], "emphasis": {"itemStyle": {"opacity": 0.8}}}}, {"name": "CUSUM 辅助曲线", "type": "line", "yAxisIndex": 1, "data": [[1743177600000, 0.0], [1743177900000, 0.0], [1743178200000, 0.0], [1743178500000, 0.0], [1743178800000, 0.0], [1743179100000, 0.0], [1743179400000, 0.0], [1743179700000, 0.0], [1743180000000, 0.0], [1743180300000, 0.0], [1743180600000, 0.0], [1743180900000, 0.0], [1743181200000, 0.0], [1743181500000, 0.0], [1743181800000, 0.0], [1743182100000, 0.8807390406926172], [1743182400000, 1.9219196122114803], [1743182700000, 0.8372499002825811], [1743183000000, 0.0], [1743183300000, 0.0], [1743183600000, 0.0], [1743183900000, 0.0], [1743184200000, 0.0], [1743184500000, 0.0], [1743184800000, 0.0], [1743185100000, 0.0], [1743185400000, 0.0], [1743185700000, 0.0], [1743186000000, 2.384878392188675], [1743186300000, 1.260098297553214], [1743186600000, 0.19548377697759545], [1743186900000, 0.0], [1743187200000, 0.0], [1743187500000, 0.0], [1743187800000, 0.0], [1743188100000, 0.0], [1743188400000, 0.0], [1743188700000, 0.0], [1743189000000, 0.0], [1743189300000, 0.0], [1743189600000, 2.1642712873025864], [1743189900000, 1.0796015753736872], [1743190200000, 0.07515262885791096], [1743190500000, 0.0], [1743190800000, 0.0], [1743191100000, 0.0], [1743191400000, 0.0], [1743191700000, 0.0], [1743192000000, 0.0], [1743192300000, 0.0], [1743192600000, 0.0], [1743192900000, 0.0], [1743193200000, 2.384878392188675], [1743193500000, 1.2400431061999333], [1743193800000, 0.09520782021119167], [1743194100000, 0.0], [1743194400000, 0.0], [1743194700000, 0.0], [1743195000000, 0.0], [1743195300000, 0.0], [1743195600000, 0.0], [1743195900000, 0.0], [1743196200000, 0.0], [1743196500000, 0.0], [1743196800000, 2.1241609045960255], [1743197100000, 1.0194360013138455], [1743197400000, 0.0], [1743197700000, 0.0], [1743198000000, 0.0], [1743198300000, 0.0], [1743198600000, 0.0], [1743198900000, 0.0], [1743199200000, 0.0], [1743199500000, 0.0], [1743199800000, 0.0], [1743200100000, 0.0], [1743200400000, 2.324712818128833], [1743200700000, 1.1798775321400914], [1743201000000, 0.07515262885791141], [1743201300000, 0.0], [1743201600000, 0.0], [1743201900000, 0.0], [1743202200000, 0.0], [1743202500000, 0.0], [1743202800000, 0.0], [1743203100000, 0.0], [1743203400000, 0.0], [1743203700000, 0.0], [1743204000000, 2.404933583541956], [1743204300000, 1.3804294456728987], [1743204600000, 0.27570454239071873], [1743204900000, 0.0], [1743205200000, 0.0], [1743205500000, 0.0], [1743205800000, 0.0], [1743206100000, 0.0], [1743206400000, 0.0], [1743206700000, 0.0], [1743207000000, 0.0], [1743207300000, 0.0], [1743207600000, 2.2244368613624292], [1743207900000, 1.039491192667126], [1743208200000, 0.0], [1743208500000, 0.0], [1743208800000, 0.0], [1743209100000, 0.0], [1743209400000, 0.0], [1743209700000, 0.0], [1743210000000, 0.0], [1743210300000, 0.0], [1743210600000, 0.0], [1743210900000, 0.0], [1743211200000, 2.384878392188675], [1743211500000, 1.2400431061999333], [1743211800000, 0.19548377697759556], [1743212100000, 0.0], [1743212400000, 0.0], [1743212700000, 0.0], [1743213000000, 0.0], [1743213300000, 0.0], [1743213600000, 0.0], [1743213900000, 0.0], [1743214200000, 0.0], [1743214500000, 0.43952483092044003], [1743214800000, 2.6840168836361498], [1743215100000, 1.739733511180216], [1743215400000, 0.6751189906045973], [1743215700000, 0.0], [1743216000000, 0.0], [1743216300000, 0.0], [1743216600000, 0.0], [1743216900000, 0.0], [1743217200000, 0.0], [1743217500000, 0.0], [1743217800000, 0.0], [1743218100000, 0.4194696395671593], [1743218400000, 2.7842928404025535], [1743218700000, 1.5792919803539698], [1743219000000, 0.4144015030119472], [1743219300000, 0.0], [1743219600000, 0.0], [1743219900000, 0.0], [1743220200000, 0.45958002227372097], [1743220500000, 0.0], [1743220800000, 0.0], [1743221100000, 0.0], [1743221400000, 2.1041057132427445], [1743221700000, 5.752461160688109], [1743222000000, 7.9969532134038195], [1743222300000, 6.91228350147492], [1743222600000, 6.288883190671478], [1743222900000, 5.645427688514756], [1743223200000, 4.600868359292418], [1743223500000, 3.4760882646569575], [1743223800000, 2.311197787314935], [1743224100000, 1.2666384580925973], [1743224400000, 0.20202393751697878], [1743224700000, 0.0], [1743225000000, 0.0], [1743225300000, 0.21891772603435133], [1743225600000, 2.643906500929588], [1743225900000, 1.519126406294127], [1743226200000, 0.414401503011947], [1743226500000, 0.0], [1743226800000, 0.0], [1743227100000, 0.0], [1743227400000, 0.0], [1743227700000, 0.0], [1743228000000, 0.0], [1743228300000, 0.0], [1743228600000, 0.0], [1743228900000, 0.35930406550731697], [1743229200000, 2.503520161456623], [1743229500000, 1.3787400668211622], [1743229800000, 0.29407035489226296], [1743230100000, 0.0], [1743230400000, 0.0], [1743230700000, 0.0], [1743231000000, 0.0], [1743231300000, 0.0], [1743231600000, 0.0], [1743231900000, 0.0], [1743232200000, 0.0], [1743232500000, 0.35930406550731697], [1743232800000, 2.8845687971689573], [1743233100000, 1.7798438938867773], [1743233400000, 0.6951741819578781], [1743233700000, 0.0], [1743234000000, 0.0], [1743234300000, 0.0], [1743234600000, 0.0], [1743234900000, 0.0], [1743235200000, 0.0], [1743235500000, 0.0], [1743235800000, 0.0], [1743236100000, 0.6801871271598092], [1743236400000, 2.8444584144623954], [1743236700000, 1.7998990852400578], [1743237000000, 0.75533975601772], [1743237300000, 0.0], [1743237600000, 0.0], [1743237900000, 0.0], [1743238200000, 0.0], [1743238500000, 0.0], [1743238800000, 0.0], [1743239100000, 0.0], [1743239400000, 0.0], [1743239700000, 0.4796352136270017], [1743240000000, 2.8645136058156764], [1743240300000, 2.000450998772866], [1743240600000, 0.895726095490686], [1743240900000, 1.8566859015964263], [1743241200000, 0.7519609983142463], [1743241500000, 0.0], [1743241800000, 0.0], [1743242100000, 0.0], [1743242400000, 0.0], [1743242700000, 0.0], [1743243000000, 0.0], [1743243300000, 0.35930406550731697], [1743243600000, 2.7441824576959917], [1743243900000, 1.6194023630605308], [1743244200000, 0.5146774597783508], [1743244500000, 0.0], [1743244800000, 0.0], [1743245100000, 0.0], [1743245400000, 0.0], [1743245700000, 0.0], [1743246000000, 0.0], [1743246300000, 0.0], [1743246600000, 0.0], [1743246900000, 0.31919368280075533], [1743247200000, 2.663961692282869], [1743247500000, 1.5993471717072503], [1743247800000, 0.47456707707178936], [1743248100000, 0.0], [1743248400000, 0.0], [1743248700000, 0.0], [1743249000000, 0.0], [1743249300000, 0.0], [1743249600000, 0.0], [1743249900000, 0.0], [1743250200000, 0.0], [1743250500000, 0.0], [1743250800000, 2.26454724406899], [1743251100000, 1.1397671494335293], [1743251400000, 0.014987054798068389], [1743251700000, 0.0], [1743252000000, 0.0], [1743252300000, 0.0], [1743252600000, 0.0], [1743252900000, 0.0], [1743253200000, 0.0], [1743253500000, 0.0], [1743253800000, 0.0], [1743254100000, 0.0], [1743254400000, 2.364823200835395], [1743254700000, 1.3403190629663377], [1743255000000, 0.23559415968415776], [1743255300000, 0.0], [1743255600000, 0.0], [1743255900000, 0.0], [1743256200000, 0.0], [1743256500000, 0.0], [1743256800000, 0.0], [1743257100000, 0.0], [1743257400000, 0.0], [1743257700000, 0.0], [1743258000000, 2.4450439662485177], [1743258300000, 1.3002086802597763], [1743258600000, 0.23559415968415776], [1743258900000, 0.0], [1743259200000, 0.0], [1743259500000, 0.0], [1743259800000, 0.0], [1743260100000, 0.0], [1743260400000, 0.0], [1743260700000, 0.0], [1743261000000, 0.0], [1743261300000, 0.0], [1743261600000, 2.344768009482113], [1743261900000, 1.1798775321400907], [1743262200000, 0.05509743750462981], [1743262500000, 0.0], [1743262800000, 0.0], [1743263100000, 0.0], [1743263400000, 0.0], [1743263700000, 0.0]], "lineStyle": {"type": "dashed", "width": 1.5}, "itemStyle": {"color": "#EE6666"}, "showSymbol": false}], "dataZoom": [{"type": "slider", "show": true, "xAxisIndex": [0], "start": 0, "end": 100}, {"type": "inside", "xAxisIndex": [0], "start": 0, "end": 100}]};
        
        // Set custom tooltip formatter
        option.tooltip.formatter = customTooltipFormatter;
        
        chart.setOption(option);
        
        // Handle window resize
        window.addEventListener('resize', function() {
            chart.resize();
        });
    </script>
</body>
</html>